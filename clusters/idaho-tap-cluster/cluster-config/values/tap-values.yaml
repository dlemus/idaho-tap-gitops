tap_install:
  values:
    excluded_packages:
    - eventing.tanzu.vmware.com
    - learningcenter.tanzu.vmware.com
    - workshops.learningcenter.tanzu.vmware.com
    
    profile: full

    shared:
      ingress_domain: "k8s.demo"

      #ca_cert_data: | # To be passed if using custom certificates.

    ceip_policy_disclosed: true # Installation fails if this is not set to true. Not a string.

    #The above keys are minimum numbers of entries needed in tap-values.yaml to get a functioning TAP Full profile installation.

    #Below are the keys which may have default values set, but can be overridden.

    #supply_chain: basic # Can take testing, testing_scanning.

    #ootb_supply_chain_basic: # Based on supply_chain set above, can be changed to ootb_supply_chain_testing, ootb_supply_chain_testing_scanning.
    #  registry:
    #    server: "harbor.kal.automatestuff.io" # Takes the value from shared section above by default, but can be overridden by setting a different value.
    #    repository: "idaho/supply-chain" # Takes the value from shared section above by default, but can be overridden by setting a different value.
    #  gitops:
    #    ssh_secret: "" # Takes "" as value by default; but can be overridden by setting a different value.

    supply_chain: testing_scanning

    ootb_supply_chain_testing_scanning:
      registry:
        repository: "idaho/supply-chain"
        server: "harbor.kal.automatestuff.io"
      gitops:
        ssh_secret: ""

    contour:
      envoy:
        service:
          type: LoadBalancer # This is set by default, but can be overridden by setting a different value.

    tap_gui:
      metadataStoreAutoconfiguration: "true"
      service_type: ClusterIP
      ingressEnabled: "true"
      app_config:
        proxy:
          /metadata-store:
            target: https://metadata-store-app.metadata-store:8443/api/v1
            changeOrigin: true
            secure: false
            headers:
              Authorization: "Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImRQSE0xSWlhNFJ3R2FybXFpdFgwY1dYY1JTcS1NMk9XVXBNT2lNUnhKTWsifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJtZXRhZGF0YS1zdG9yZSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJtZXRhZGF0YS1zdG9yZS1yZWFkLXdyaXRlLWNsaWVudCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJtZXRhZGF0YS1zdG9yZS1yZWFkLXdyaXRlLWNsaWVudCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6ImZmYzkwYjMyLWNlNjQtNGUwNi04YzJmLWNiNzU5NWNlZTQxNCIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDptZXRhZGF0YS1zdG9yZTptZXRhZGF0YS1zdG9yZS1yZWFkLXdyaXRlLWNsaWVudCJ9.t-r7r5pbPWaoAzAnrXvZdYg6v5VSmhp_bUn3eJAHcwU0ZRZac0XhjHlLCJ4T4mITiYWkYAZ_EDUeBIQY-TGL-3dofJJSfnAmuRiAPVfD2tasO8t6dW6FBs4iB_1utaUJ1Whgq8MGKIiseQNH8iTe4oElmmWV6M1hPtrpJDjba4mAExpp10GIoV8l8F85uEIEYW6qZ3XxtRlBspb1IPg4tS0dmEHR80_fxCe28ipYRF2FGnLgvGZB5izI2HX-vm94DoP_cnlgEOvkKEocvOBvzre0E5xV8DC3TOSrMXrai289yZT3any0BJpP0fGXkX_uK3UZF8xUrWG1sAXvGMX3HQTt1VTcftYL9W-9CHnQkF3-BrvWbeVe65TT8COxF0TPW6m_ouqmNC9rPLAW_MwT0Hg0MMMPBHyMwMvt-ZTYt_23yJn3NjbNsSHjA2oKKfjvHVQqS4bb8K-wQX2gUW5wArv2fPnRBcNJbH7xBq258jh-UdkByMgdRDW0l9PZKbUAh85FWm58YvQSnQqbcP_Yko5gEIaISoJNWFR0rfTGH-Bg2RPKRgtZpJIWOU2DAB_p4zESakPldHP9dI3oEJXdTBCPndze52SYiQOo0Pf2YIk9PUABjc6s2E5MSEqp_eWkDUyMd-HLYqYhuhABgf_lwrG01t4a4zgbyKJvq0jE7xA"
              X-Custom-Source: project-star      
        auth:
          allowGuestAccess: true
        catalog:
          locations:
            - type: url
              target: https://github.com/dlemus/tap-catalog/blob/master/catalog-info.yaml

    namespace_provisioner:
      controller: true
      additional_sources:
        - git:
            ref: origin/main
            subPath: ns-provisioner-samples/testing-scanning-supplychain-parameterized
            url: https://github.com/vmware-tanzu/application-accelerator-samples.git
          path: _ytt_lib/testing-scanning-supplychain-parameterized-setup
      parameter_prefixes:
        - tap.tanzu.vmware.com

    metadata_store:
      ns_for_export_app_cert: developer
      app_service_type: ClusterIP # Defaults to LoadBalancer. If shared.ingress_domain is set earlier, this must be set to ClusterIP.
      ingress_enabled: "true"
      ingress_domain: "k8s.demo"

    scanning:
      metadataStore:
        url: "" # Configuration is moved, so set this string to empty.

    grype:
      namespace: developer
      targetImagePullSecret: "registries-credentials"
        
    policy:
      tuf_enabled: false # By default, TUF initialization and keyless verification are deactivated.